{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MonthPaginator = void 0;\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar react_popper_1 = require(\"react-popper\");\n\nvar emotion_1 = require(\"emotion\");\n\nvar i18n_1 = require(\"../../i18n\");\n\nvar styles_1 = require(\"../../styles\");\n\nvar locale_1 = require(\"../../util/locale\");\n\nvar Button_1 = require(\"../Button\");\n\nvar Icon_1 = require(\"../Icon\");\n\nvar HFlow_1 = require(\"../HFlow\");\n\nvar MonthPicker_1 = require(\"../MonthPicker/MonthPicker\");\n\nvar Text_1 = require(\"../Text\");\n\nvar Tooltip_1 = require(\"../Tooltip\");\n\nvar FocusManagerContainer_1 = require(\"../FocusManagerContainer\");\n\nfunction MonthPaginator(props) {\n  var month = props.month,\n      year = props.year,\n      isOpen = props.isOpen,\n      ghost = props.ghost,\n      popperPlacement = props.popperPlacement,\n      formatter = props.formatter,\n      onChange = props.onChange;\n  var locale = i18n_1.useLocale();\n\n  var _a = react_1.useState(isOpen),\n      open = _a[0],\n      setOpen = _a[1];\n\n  var _b = styles_1.useStyles(createStyles, open).classes,\n      container = _b.container,\n      ghostContainer = _b.ghostContainer,\n      showMonth = _b.showMonth,\n      popup = _b.popup;\n\n  var _c = react_1.useState(month),\n      visibleMonth = _c[0],\n      setVisibleMonth = _c[1];\n\n  react_1.useEffect(function () {\n    setVisibleMonth(month);\n  }, [month]);\n\n  var _d = react_1.useState(year),\n      visibleYear = _d[0],\n      setVisibleYear = _d[1];\n\n  react_1.useEffect(function () {\n    setVisibleYear(year);\n  }, [year]);\n\n  var _e = react_1.useState(),\n      anchorRef = _e[0],\n      setAnchorRef = _e[1];\n\n  var _f = react_1.useState(),\n      popperRef = _f[0],\n      setPopperRef = _f[1];\n\n  var _g = react_popper_1.usePopper(anchorRef, popperRef, {\n    placement: popperPlacement\n  }),\n      popperStyle = _g.styles.popper,\n      placement = _g.attributes.placement;\n\n  var updateStates = function (newMonth) {\n    setVisibleMonth(newMonth.month);\n    setVisibleYear(newMonth.year);\n    onChange && onChange(newMonth);\n  };\n\n  var onPrevClick = function () {\n    if (open) setVisibleYear(function (currYear) {\n      return currYear - 1;\n    });else {\n      var newMonth = visibleMonth === 0 ? 11 : visibleMonth - 1;\n      var newYear = visibleMonth === 0 ? visibleYear - 1 : visibleYear;\n      updateStates({\n        month: newMonth,\n        year: newYear\n      });\n    }\n  };\n\n  var onNextClick = function () {\n    if (open) setVisibleYear(function (currYear) {\n      return currYear + 1;\n    });else {\n      var newMonth = visibleMonth === 11 ? 0 : visibleMonth + 1;\n      var newYear = visibleMonth === 11 ? visibleYear + 1 : visibleYear;\n      updateStates({\n        month: newMonth,\n        year: newYear\n      });\n    }\n  };\n\n  var onMonthClick = function (month) {\n    updateStates(month);\n    setOpen(!open);\n  };\n\n  var handleShowMonthsClick = function () {\n    return setOpen(!open);\n  };\n\n  var handleFocusOut = function () {\n    return setOpen(false);\n  };\n\n  react_1.useEffect(function () {\n    open && (popperRef === null || popperRef === void 0 ? void 0 : popperRef.focus());\n  }, [open, popperRef]);\n  var baseYearDate = new Date(visibleYear, visibleMonth, 1, 0, 0, 0, 0);\n  var yearFormatter = new Intl.DateTimeFormat(locale_1.getUserLocale(), {\n    year: 'numeric'\n  });\n  var monthFormatter = locale_1.getMonthShortFormat(baseYearDate, formatter);\n  return react_1.default.createElement(FocusManagerContainer_1.FocusManagerContainer, {\n    onFocusOut: handleFocusOut\n  }, react_1.default.createElement(\"div\", {\n    className: ghost ? ghostContainer : container,\n    ref: setAnchorRef\n  }, react_1.default.createElement(HFlow_1.HFlow, {\n    alignItems: 'center'\n  }, react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.calendar.previousMonth\n  }, react_1.default.createElement(Button_1.Button, {\n    disabled: open,\n    size: 'small',\n    skin: 'ghost',\n    onClick: onPrevClick,\n    \"data-testid\": 'MonthPaginator.PrevButton'\n  }, react_1.default.createElement(Icon_1.Icon, {\n    icon: 'angleLeft'\n  }))), react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.monthPaginator.show\n  }, react_1.default.createElement(Button_1.Button, {\n    size: 'small',\n    skin: 'ghost',\n    disabled: open,\n    onClick: handleShowMonthsClick,\n    style: showMonth,\n    \"data-testid\": 'MonthPaginator.ShowMonthsButton'\n  }, react_1.default.createElement(Text_1.Text, {\n    fontWeight: 'bold',\n    fontSize: 0.875\n  }, monthFormatter + \" - \", yearFormatter.format(baseYearDate)))), react_1.default.createElement(Tooltip_1.Tooltip, {\n    text: locale.calendar.nextMonth\n  }, react_1.default.createElement(Button_1.Button, {\n    disabled: open,\n    size: 'small',\n    skin: 'ghost',\n    onClick: onNextClick,\n    \"data-testid\": 'MonthPaginator.NextButton'\n  }, react_1.default.createElement(Icon_1.Icon, {\n    icon: 'angleRight'\n  }))))), open && react_1.default.createElement(MonthPicker_1.MonthPicker, {\n    visibleMonth: {\n      month: month,\n      year: year\n    },\n    onVisibleMonthChange: onMonthClick,\n    ref: setPopperRef,\n    className: emotion_1.css(popup, popperStyle),\n    \"data-placement\": placement\n  }));\n}\n\nexports.MonthPaginator = MonthPaginator;\nMonthPaginator.defaultProps = {\n  isOpen: false,\n  popperPlacement: 'bottom-start',\n  month: new Date().getMonth(),\n  year: new Date().getFullYear()\n};\n\nvar createStyles = function (theme, open) {\n  return {\n    container: {\n      display: 'inline-block',\n      padding: '1rem 0.5rem',\n      backgroundColor: theme.pallete.surface.main,\n      border: \"1px solid \" + theme.pallete.divider,\n      boxShadow: theme.shadows.outer['20'],\n      borderRadius: theme.radius.popper\n    },\n    ghostContainer: {\n      padding: '-2rem'\n    },\n    showMonth: {\n      margin: 'auto -1rem'\n    },\n    popup: {\n      zIndex: theme.zIndex.popper\n    }\n  };\n};","map":{"version":3,"sources":["../../../src/components/MonthPaginator/MonthPaginator.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonthPaginator = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_popper_1 = require(\"react-popper\");\nvar emotion_1 = require(\"emotion\");\nvar i18n_1 = require(\"../../i18n\");\nvar styles_1 = require(\"../../styles\");\nvar locale_1 = require(\"../../util/locale\");\nvar Button_1 = require(\"../Button\");\nvar Icon_1 = require(\"../Icon\");\nvar HFlow_1 = require(\"../HFlow\");\nvar MonthPicker_1 = require(\"../MonthPicker/MonthPicker\");\nvar Text_1 = require(\"../Text\");\nvar Tooltip_1 = require(\"../Tooltip\");\nvar FocusManagerContainer_1 = require(\"../FocusManagerContainer\");\nfunction MonthPaginator(props) {\n    var month = props.month, year = props.year, isOpen = props.isOpen, ghost = props.ghost, popperPlacement = props.popperPlacement, formatter = props.formatter, onChange = props.onChange;\n    var locale = i18n_1.useLocale();\n    var _a = react_1.useState(isOpen), open = _a[0], setOpen = _a[1];\n    var _b = styles_1.useStyles(createStyles, open).classes, container = _b.container, ghostContainer = _b.ghostContainer, showMonth = _b.showMonth, popup = _b.popup;\n    var _c = react_1.useState(month), visibleMonth = _c[0], setVisibleMonth = _c[1];\n    react_1.useEffect(function () {\n        setVisibleMonth(month);\n    }, [month]);\n    var _d = react_1.useState(year), visibleYear = _d[0], setVisibleYear = _d[1];\n    react_1.useEffect(function () {\n        setVisibleYear(year);\n    }, [year]);\n    var _e = react_1.useState(), anchorRef = _e[0], setAnchorRef = _e[1];\n    var _f = react_1.useState(), popperRef = _f[0], setPopperRef = _f[1];\n    var _g = react_popper_1.usePopper(anchorRef, popperRef, { placement: popperPlacement }), popperStyle = _g.styles.popper, placement = _g.attributes.placement;\n    var updateStates = function (newMonth) {\n        setVisibleMonth(newMonth.month);\n        setVisibleYear(newMonth.year);\n        onChange && onChange(newMonth);\n    };\n    var onPrevClick = function () {\n        if (open)\n            setVisibleYear(function (currYear) { return currYear - 1; });\n        else {\n            var newMonth = visibleMonth === 0 ? 11 : visibleMonth - 1;\n            var newYear = visibleMonth === 0 ? visibleYear - 1 : visibleYear;\n            updateStates({ month: newMonth, year: newYear });\n        }\n    };\n    var onNextClick = function () {\n        if (open)\n            setVisibleYear(function (currYear) { return currYear + 1; });\n        else {\n            var newMonth = visibleMonth === 11 ? 0 : visibleMonth + 1;\n            var newYear = visibleMonth === 11 ? visibleYear + 1 : visibleYear;\n            updateStates({ month: newMonth, year: newYear });\n        }\n    };\n    var onMonthClick = function (month) {\n        updateStates(month);\n        setOpen(!open);\n    };\n    var handleShowMonthsClick = function () { return setOpen(!open); };\n    var handleFocusOut = function () { return setOpen(false); };\n    react_1.useEffect(function () {\n        open && (popperRef === null || popperRef === void 0 ? void 0 : popperRef.focus());\n    }, [open, popperRef]);\n    var baseYearDate = new Date(visibleYear, visibleMonth, 1, 0, 0, 0, 0);\n    var yearFormatter = new Intl.DateTimeFormat(locale_1.getUserLocale(), { year: 'numeric' });\n    var monthFormatter = locale_1.getMonthShortFormat(baseYearDate, formatter);\n    return (react_1.default.createElement(FocusManagerContainer_1.FocusManagerContainer, { onFocusOut: handleFocusOut },\n        react_1.default.createElement(\"div\", { className: ghost ? ghostContainer : container, ref: setAnchorRef },\n            react_1.default.createElement(HFlow_1.HFlow, { alignItems: 'center' },\n                react_1.default.createElement(Tooltip_1.Tooltip, { text: locale.calendar.previousMonth },\n                    react_1.default.createElement(Button_1.Button, { disabled: open, size: 'small', skin: 'ghost', onClick: onPrevClick, \"data-testid\": 'MonthPaginator.PrevButton' },\n                        react_1.default.createElement(Icon_1.Icon, { icon: 'angleLeft' }))),\n                react_1.default.createElement(Tooltip_1.Tooltip, { text: locale.monthPaginator.show },\n                    react_1.default.createElement(Button_1.Button, { size: 'small', skin: 'ghost', disabled: open, onClick: handleShowMonthsClick, style: showMonth, \"data-testid\": 'MonthPaginator.ShowMonthsButton' },\n                        react_1.default.createElement(Text_1.Text, { fontWeight: 'bold', fontSize: 0.875 }, monthFormatter + \" - \",\n                            yearFormatter.format(baseYearDate)))),\n                react_1.default.createElement(Tooltip_1.Tooltip, { text: locale.calendar.nextMonth },\n                    react_1.default.createElement(Button_1.Button, { disabled: open, size: 'small', skin: 'ghost', onClick: onNextClick, \"data-testid\": 'MonthPaginator.NextButton' },\n                        react_1.default.createElement(Icon_1.Icon, { icon: 'angleRight' }))))),\n        open && (react_1.default.createElement(MonthPicker_1.MonthPicker, { visibleMonth: { month: month, year: year }, onVisibleMonthChange: onMonthClick, ref: setPopperRef, className: emotion_1.css(popup, popperStyle), \"data-placement\": placement }))));\n}\nexports.MonthPaginator = MonthPaginator;\nMonthPaginator.defaultProps = {\n    isOpen: false,\n    popperPlacement: 'bottom-start',\n    month: new Date().getMonth(),\n    year: new Date().getFullYear(),\n};\nvar createStyles = function (theme, open) { return ({\n    container: {\n        display: 'inline-block',\n        padding: '1rem 0.5rem',\n        backgroundColor: theme.pallete.surface.main,\n        border: \"1px solid \" + theme.pallete.divider,\n        boxShadow: theme.shadows.outer['20'],\n        borderRadius: theme.radius.popper,\n    },\n    ghostContainer: {\n        padding: '-2rem',\n    },\n    showMonth: {\n        margin: 'auto -1rem',\n    },\n    popup: {\n        zIndex: theme.zIndex.popper,\n    },\n}); };\n//# sourceMappingURL=MonthPaginator.js.map"]},"metadata":{},"sourceType":"script"}